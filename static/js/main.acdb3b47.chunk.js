(this["webpackJsonppopulation-mesh"]=this["webpackJsonppopulation-mesh"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),a=n(9),r=n.n(a),l=(n(18),n(4)),i=n(3),s=(n(19),n(6));n(23);function u(e,t){var n=e.lat*Math.PI/180,c=t.lat*Math.PI/180,o=(t.lat-e.lat)*Math.PI/180,a=(t.lon-e.lon)*Math.PI/180,r=Math.sin(o/2)*Math.sin(o/2)+Math.cos(n)*Math.cos(c)*Math.sin(a/2)*Math.sin(a/2);return 6371e3*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}function j(e){return'<?xml version="1.0" encoding="UTF-8"?>\n<kml xmlns="http://www.opengis.net/kml/2.2">\n    <Document>\n        <Style id="tier1_places">\n            <IconStyle>\n                <color>ffffff00</color>\n            </IconStyle>\n        </Style>\n        <Style id="tier2_places">\n            <IconStyle>\n                <color>ffcf9a02</color>\n            </IconStyle>\n        </Style>\n        <Style id="tier3_places">\n            <IconStyle>\n                <color>ffff7f00</color>\n            </IconStyle>\n        </Style>\n        <Style id="tier4_places">\n            <IconStyle>\n                <color>ffcc0000</color>\n            </IconStyle>\n        </Style>\n        <Style id="tier1_connectors">\n            <LineStyle>\n                <color>ffffff00</color>\n                <width>5</width>\n            </LineStyle>\n        </Style>\n        <Style id="tier2_connectors">\n            <LineStyle>\n                <color>ffcf9a02</color>\n                <width>4</width>\n            </LineStyle>\n        </Style>\n        <Style id="tier3_connectors">\n            <LineStyle>\n                <color>ffff7f00</color>\n                <width>3</width>\n            </LineStyle>\n        </Style>\n        <Style id="tier4_connectors">\n            <LineStyle>\n                <color>ffcc0000</color>\n                <width>2</width>\n            </LineStyle>\n        </Style>\n        '.concat(e.map((function(e){return function(e){return"\n    <Folder>\n        <name>".concat(e.label,"</name>\n        ").concat(e.points&&e.points.map((function(t){return n=t,c=e.style,"\n        <Placemark>\n            <name>".concat(n.tags.name,"</name>\n            <description>Population: ").concat(n.tags.population,"</description>\n            <styleUrl>#").concat(c,"</styleUrl>\n            <Point>\n                <coordinates>").concat(n.lon,",").concat(n.lat,",0</coordinates>\n            </Point>\n        </Placemark>");var n,c})).join(""),"\n        ").concat(e.lines&&e.lines.map((function(t){return function(e,t){var n=Object(i.a)(e,2),c=n[0],o=n[1];return"\n        <Placemark>\n            <name>From ".concat(c.tags.name," to ").concat(o.tags.name,"</name>\n            <description>Distance: ").concat(u(c,o).toFixed(0),"m</description>\n            <styleUrl>#").concat(t,"</styleUrl>\n            <Point>\n                <coordinates>\n                    ").concat(c.lon,",").concat(c.lat,",0\n                    ").concat(o.lon,",").concat(o.lat,",0\n                </coordinates>\n            </Point>\n        </Placemark>")}(t,e.style)})).join(""),"\n    </Folder>")}(e)})).join(""),"\n    </Document>\n</kml>")}var b=n(5),h=["#00FFFF","#029ACF","#007FFF","#0000CC"];function d(e){return{"circle-radius":{base:5/e,stops:[[12,10/e],[22,180/e]]},"circle-color":h[e-1]}}function p(e){return{"line-width":{base:3/e,stops:[[12,5/e],[22,90/e]]},"line-color":h[e-1]}}function O(e,t){return{type:"FeatureCollection",features:[].concat(Object(l.a)(e.map((function(e){return{geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:{name:e.tags.name}}}))),Object(l.a)(t.map((function(e){var t=Object(i.a)(e,2),n=t[0],c=t[1];return{geometry:{type:"LineString",coordinates:[[n.lon,n.lat],[c.lon,c.lat]]},properties:{name:"From ".concat(n.tags.name," to ").concat(c.tags.name)}}}))))}}function f(e,t){var n,c=[],o=Object(b.a)(e);try{for(o.s();!(n=o.n()).done;){var a,r=n.value,l=Object(b.a)(e);try{for(l.s();!(a=l.n()).done;){var i=a.value;if(r.id<i.id)u(r,i)<t&&c.push([r,i])}}catch(s){l.e(s)}finally{l.f()}}}catch(s){o.e(s)}finally{o.f()}return c}var y=n(1),k=Object(s.d)({accessToken:"pk.eyJ1IjoiaWptYWNkIiwiYSI6ImNqZ2J6dnNvYjM5Y3QzMnFkYWNybzM2bnkifQ.OE6IZdjeV6XK-NGACNu60g"});var x=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)([-3.667,56.66]),r=Object(i.a)(a,2),u=r[0],b=r[1],h=Object(c.useState)(7),x=Object(i.a)(h,2),v=x[0],P=x[1],C=Object(c.useState)(105e3),w=Object(i.a)(C,2),F=w[0],I=w[1],M=Object(c.useState)(!0),_=Object(i.a)(M,2),L=_[0],N=_[1],U=Object(c.useState)(!1),A=Object(i.a)(U,2),D=A[0],R=A[1],T=Object(c.useState)(!0),Y=Object(i.a)(T,2),J=Y[0],q=Y[1],z=Object(c.useState)(!1),B=Object(i.a)(z,2),E=B[0],W=B[1],Z=Object(c.useState)(!0),Q=Object(i.a)(Z,2),G=Q[0],K=Q[1],V=Object(c.useState)(!1),X=Object(i.a)(V,2),H=X[0],$=X[1],ee=Object(c.useState)(!0),te=Object(i.a)(ee,2),ne=te[0],ce=te[1],oe=Object(c.useState)(!1),ae=Object(i.a)(oe,2),re=ae[0],le=ae[1],ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=Object(c.useRef)(!0);return Object(c.useCallback)((function(){n.current&&(e.apply(void 0,arguments),n.current=!1,setTimeout((function(){return n.current=!0}),t))}),[e,t])}((function(e){(function(e){var t=e.map((function(e){return e.toFixed(3)})).join(",");return function(e){var t=S.find((function(t){return t.url===e}));t||(t={url:e,result:fetch(e).then((function(e){return e.ok?e.json():Promise.reject(e.text())}))},S.unshift(t),S.length=10);return t.result}("https://overpass-api.de/api/interpreter?data=[out:json][bbox];(node[population];);out;&bbox=".concat(t))})(e.toArray().flat()).then((function(e){return o(e.elements)}))}),5e3),se=L?g(n,1e5):[],ue=D?f(se,F):[],je=O(se,ue),be=d(1),he=p(1),de=J?g(n,5e4,1e5):[],pe=E?f([].concat(Object(l.a)(se),Object(l.a)(de)),F):[],Oe=O(de,pe),fe=d(2),ye=p(2),ke=G?g(n,1e4,5e4):[],xe=H?f([].concat(Object(l.a)(se),Object(l.a)(de),Object(l.a)(ke)),F):[],me=O(ke,xe),ge=d(3),Se=p(3),ve=ne?g(n,5e3,1e4):[],Pe=re?f([].concat(Object(l.a)(se),Object(l.a)(de),Object(l.a)(ke),Object(l.a)(ve)),F):[],Ce=O(ve,Pe),we=d(4),Fe=p(4);return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsxs)("div",{className:"Panel",children:[Object(y.jsx)(m,{n:n.length,singular:"Total Place"}),Object(y.jsx)("h2",{children:"100k+"}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"checkbox",checked:L,onChange:function(e){return N(e.target.checked)}}),Object(y.jsx)(m,{n:se.length,singular:"Place"})]}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"checkbox",checked:D,onChange:function(e){return R(e.target.checked)}}),Object(y.jsx)(m,{n:ue.length,singular:"Connection"})]}),Object(y.jsx)("h2",{children:"50k - 100k"}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"checkbox",checked:J,onChange:function(e){return q(e.target.checked)}}),Object(y.jsx)(m,{n:de.length,singular:"Place"})]}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"checkbox",checked:E,onChange:function(e){return W(e.target.checked)}}),Object(y.jsx)(m,{n:pe.length,singular:"Connection"})]}),Object(y.jsx)("h2",{children:"10k - 50k"}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"checkbox",checked:G,onChange:function(e){return K(e.target.checked)}}),Object(y.jsx)(m,{n:ke.length,singular:"Place"})]}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"checkbox",checked:H,onChange:function(e){return $(e.target.checked)}}),Object(y.jsx)(m,{n:xe.length,singular:"Connection"})]}),Object(y.jsx)("h2",{children:"5k - 10k"}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"checkbox",checked:ne,onChange:function(e){return ce(e.target.checked)}}),Object(y.jsx)(m,{n:ve.length,singular:"Place"})]}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"checkbox",checked:re,onChange:function(e){return le(e.target.checked)}}),Object(y.jsx)(m,{n:Pe.length,singular:"Connection"})]}),Object(y.jsx)("h2",{children:"Options"}),Object(y.jsxs)("label",{children:["Max Connector Length (km)",Object(y.jsx)("input",{type:"number",min:0,value:F/1e3,onChange:function(e){return I(1e3*e.target.valueAsNumber)}})]}),Object(y.jsx)("h2",{children:"Download"}),Object(y.jsx)("button",{onClick:function(){var e=[];L&&e.push({label:"100k+",points:se,style:"tier1_places"}),J&&e.push({label:"50k - 100k",points:de,style:"tier2_places"}),G&&e.push({label:"10k - 50k",points:ke,style:"tier3_places"}),ne&&e.push({label:"5k - 10k",points:ve,style:"tier4_places"}),D&&e.push({label:"Connections 100k+",lines:ue,style:"tier1_connectors"}),E&&e.push({label:"Connections 50k - 100k",lines:pe,style:"tier2_connectors"}),H&&e.push({label:"Connections 10k - 50k",lines:xe,style:"tier3_connectors"}),re&&e.push({label:"Connections 5k - 10k",lines:Pe,style:"tier4_connectors"}),function(e,t){var n=new Blob([t]),c=window.URL.createObjectURL(n),o=document.createElement("a");o.href=c,o.download=e,document.body.append(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(c)}))}("places.kml",j(e))},children:"kml"})]}),Object(y.jsxs)(k,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"100vh",width:"100vw"},onSourceData:function(e){ie(e.getBounds()),b(e.getCenter().toArray()),P(e.getZoom())},center:u,zoom:[v],children:[Object(y.jsx)(s.a,{data:je,circlePaint:be,linePaint:he}),Object(y.jsx)(s.a,{data:Oe,circlePaint:fe,linePaint:ye}),Object(y.jsx)(s.a,{data:me,circlePaint:ge,linePaint:Se}),Object(y.jsx)(s.a,{data:Ce,circlePaint:we,linePaint:Fe}),Object(y.jsx)(s.c,{}),Object(y.jsx)(s.b,{})]})]})};function m(e){var t=e.n,n=e.singular,c=e.plural,o=void 0===c?null:c;return Object(y.jsx)(y.Fragment,{children:"".concat(t," ").concat(1===t?n:o||n+"s")})}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return e.filter((function(e){return t<=+e.tags.population&&+e.tags.population<n}))}var S=[];r.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(x,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.acdb3b47.chunk.js.map